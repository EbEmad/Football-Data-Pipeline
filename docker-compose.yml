version: '3'
services:
  postgres:
    image: postgres:latest
    container_name: postgres
    environment:
      POSTGRES_USER: root
      POSTGRES_PASSWORD: root
      POSTGRES_DB: Football
    ports:
      - "5432:5432"
    networks:
      - ETL-networks
  spark:
    image: bitnami/spark:latest
    container_name: spark
    ports:
      - "7077:7077"
    environment:
     - SPARK_MASTER_HOST=spark
     - SPARK_MASTER_PORT=7077
    volumes:
      - ./spark/app:/opt/airflow/spark/app
      - ./spark/resources:/opt/airflow/spark/resources
      - ./JDBC_Driver:/Drivers/SQL_Sever/jdbc
    networks:
      - ETL-networks

  jupyter:
    image: jupyter/pyspark-notebook
    container_name: jupyter
    depends_on:
      - spark
    ports:
      - "8885:8888"
    environment:
      SPARK_MASTER_URL: spark://spark:7077
    networks:
      - ETL-networks
    volumes:
      - ./notebooks:/home/jovyan/work/notebooks/
      - ./data:/home/jovyan/work/data/
      - ./JDBC_Driver:/Drivers/SQL_Sever/jdbc


networks:
  ETL-networks:
    driver: bridge